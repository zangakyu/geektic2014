-- DROP ALL TABLES
DROP TABLE GEEKCONSULTATION IF EXISTS;
DROP TABLE GEEKINTEREST IF EXISTS;
DROP TABLE GEEK IF EXISTS;
DROP TABLE INTEREST IF EXISTS;


--CREATE TABLES

-- 0 = geekete , 1 = geek
CREATE TABLE GEEK (id int, lastName varchar(30),firstName varchar(30),age int,sexe boolean,mail varchar(30));

CREATE TABLE INTEREST (id int, name varchar(30));

CREATE TABLE GEEKINTEREST(GEEKID int,INTERESTID int);

CREATE TABLE GEEKCONSULTATION (id int,date timestamp,fromIP varchar(11),geekid int);

-- PRIMARY KEYS
ALTER TABLE GEEK ADD CONSTRAINT PK_GEEK PRIMARY KEY(id);
ALTER TABLE INTEREST ADD CONSTRAINT PK_INTEREST PRIMARY KEY(id);
ALTER TABLE GEEKINTEREST ADD CONSTRAINT PK_GEEKINTEREST PRIMARY KEY(GEEKID,INTERESTID);
ALTER TABLE GEEKCONSULTATION ADD CONSTRAINT PK_GEEKCONSULTATION PRIMARY KEY(id);

-- FOREIGN KEYS
ALTER TABLE GEEKCONSULTATION ADD CONSTRAINT FK_GEEKCONSULTATION_GEEKID_GEEK FOREIGN KEY(GEEKID) REFERENCES GEEK(id);
ALTER TABLE GEEKINTEREST ADD CONSTRAINT FK_GEEKINTEREST_GEEKID_GEEK FOREIGN KEY(GEEKID) REFERENCES GEEK(id);
ALTER TABLE GEEKINTEREST ADD CONSTRAINT FK_GEEKINTEREST_INTERESTID_INTEREST FOREIGN KEY(INTERESTID) REFERENCES INTEREST(ID);

-- DATA
INSERT INTO GEEK VALUES (0,'Elric','Edward',12,1,'edward.elric@gmail.com');
INSERT INTO GEEK VALUES (1,'Elric','Alphonse',11,1,'alphonse.elric@gmail.com');
INSERT INTO GEEK VALUES (2,'Winchester','Dean',26,1,'dean.winchester@gmail.com');
INSERT INTO GEEK VALUES (3,'Winchester','Sam',24,1,'sam.winchester@gmail.com');
INSERT INTO GEEK VALUES (4,'Simpson','Marge',39,0,'marge.simpson@gmail.com');
INSERT INTO GEEK VALUES (5,'Simpson','Homer',40,1,'homer.simpson@gmail.com');

INSERT INTO INTEREST VALUES(0,'JAVA');
INSERT INTO INTEREST VALUES(1,'C#');
INSERT INTO INTEREST VALUES(2,'Alchemy');
INSERT INTO INTEREST VALUES(3,'TDD');
INSERT INTO INTEREST VALUES(4,'spring');
INSERT INTO INTEREST VALUES(5,'linux');
INSERT INTO INTEREST VALUES(6,'windows');
INSERT INTO INTEREST VALUES(7,'hunting');
INSERT INTO INTEREST VALUES(8,'hacking');
INSERT INTO INTEREST VALUES(9,'TV');

INSERT INTO GEEKINTEREST VALUES(0,2);
INSERT INTO GEEKINTEREST VALUES(1,2);
INSERT INTO GEEKINTEREST VALUES(2,7);
INSERT INTO GEEKINTEREST VALUES(3,7);
INSERT INTO GEEKINTEREST VALUES(3,5);
INSERT INTO GEEKINTEREST VALUES(3,8);
INSERT INTO GEEKINTEREST VALUES(4,1);
INSERT INTO GEEKINTEREST VALUES(4,0);
INSERT INTO GEEKINTEREST VALUES(5,8);
INSERT INTO GEEKINTEREST VALUES(5,9);



